#include <avr/pgmspace.h>
#include <stdint.h>
#include <stdbool.h>

static const uint8_t outvals[] PROGMEM = {
		0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09,
		0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18, 0x19,
		0x20, 0x21, 0x22, 0x23, 0x24, 0x25, 0x26, 0x27, 0x28, 0x29,
		0x30, 0x31 };

// 5-bit input: PB0..PB4
// 8-bit output: PA0..PA7

int main() {
	DDRA = 0xff;	/* Port A complete outputs */
	DDRB = 0x00;	/* Port B complete inputs */
	PORTB = 0xff;	/* Pullups active */
	while (true) {
		uint8_t inval = PINB & 0x1f;
		uint8_t outval = pgm_read_byte_near(outvals + inval);
		PORTA = outval;
	}
	return 0;
}
